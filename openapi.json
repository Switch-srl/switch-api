{"openapi":"3.1.0","info":{"title":"Switch API","description":"\n        This document describes and documents the Switch API, which is used to manage\n        and interact with the Switch core engine.\n        It provides a series of endpoint to handle forecast access, operations managment\n        and many more functionalities.\n        ","version":"1.0"},"paths":{"/auth/api-keys":{"get":{"tags":["Auth","Auth"],"summary":"List API Keys","description":"Retrieve a paginated list of API keys belonging to the authenticated user. Supports advanced filtering by name, expiration date, creation date, and authorization scopes. Results can be sorted and searched to help users manage their API key collection efficiently.\n\n**Failure Modes:**\n- **401**: Authentication credentials missing, invalid, expired, or revoked\n- **403**: Missing required `api_keys:read` authorization scope\n- **422**: Invalid filter parameters or malformed query string\n- **500**: Database connection issues or unexpected server error\n\n**Required Auth Scopes:**\n- `api_keys:read`","operationId":"list_api_keys","security":[{"HTTPBearer":[]}],"parameters":[{"name":"order_by","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Order By"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"uuid","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Uuid"}},{"name":"uuid__in","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Uuid  In"}},{"name":"name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"}},{"name":"name__in","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name  In"}},{"name":"exp__gte","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Exp  Gte"}},{"name":"exp__gt","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Exp  Gt"}},{"name":"exp__lte","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Exp  Lte"}},{"name":"exp__lt","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Exp  Lt"}},{"name":"exp__isnull","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Exp  Isnull"}},{"name":"created_at__gte","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At  Gte"}},{"name":"created_at__gt","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At  Gt"}},{"name":"created_at__lte","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At  Lte"}},{"name":"created_at__lt","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At  Lt"}},{"name":"authscope__order_by","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authscope  Order By"}},{"name":"authscope__search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authscope  Search"}},{"name":"authscope__slug","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authscope  Slug"}},{"name":"authscope__slug__in","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authscope  Slug  In"}},{"name":"authscope__description","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authscope  Description"}}],"responses":{"200":{"description":"List of API keys successfully retrieved with applied filters.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ApiKeyPublic"},"title":"Response List Api Keys"}}}},"401":{"description":"Authentication credentials missing, invalid, expired, or revoked."},"403":{"description":"Missing required `api_keys:read` authorization scope."},"422":{"description":"Validation error in filter parameters or query string format."},"500":{"description":"Database connection failure or unexpected server error."}}},"post":{"tags":["Auth","Auth"],"summary":"Create API Key","description":"Generate a new API key for the authenticated user with customizable expiration and authorization scopes. The generated key string is only displayed once for security reasons - ensure it is saved immediately. If no scopes are specified, the key inherits all scopes from the user. Invalid or unauthorized scopes will result in creation failure.\n\n**Failure Modes:**\n- **400**: Invalid authorization scopes specified in request\n- **401**: Authentication credentials missing, invalid, expired, or revoked\n- **403**: Missing required `api_keys:write` authorization scope\n- **422**: Invalid request body format or missing required fields\n- **500**: Database transaction failure or token generation error\n\n**Required Auth Scopes:**\n- `api_keys:write`","operationId":"create_api_key","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeyCreate"}}}},"responses":{"201":{"description":"API key successfully created with metadata and key string.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeyFirstTimePublic"}}}},"400":{"description":"Invalid authorization scopes specified - user lacks permission for requested scopes."},"401":{"description":"Authentication credentials missing, invalid, expired, or revoked."},"403":{"description":"Missing required `api_keys:write` authorization scope."},"422":{"description":"Invalid request body format or missing required fields."},"500":{"description":"Database transaction failure or token generation error."}}}},"/auth/api-keys/{uuid}":{"get":{"tags":["Auth","Auth"],"summary":"Get API Key","description":"Retrieve detailed information about a specific API key by its UUID. Returns comprehensive metadata including name, expiration, creation date, and associated authorization scopes. The actual key string is never returned for security reasons. Access is restricted to the API key owner.\n\n**Failure Modes:**\n- **401**: Authentication credentials missing, invalid, expired, or revoked\n- **403**: Missing required `api_keys:read` authorization scope\n- **404**: API key not found or user lacks ownership permissions\n- **422**: Invalid UUID format in path parameter\n- **500**: Database query failure or unexpected server error\n\n**Required Auth Scopes:**\n- `api_keys:read`","operationId":"get_api_key","security":[{"HTTPBearer":[]}],"parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string","title":"Uuid"}}],"responses":{"200":{"description":"API key metadata successfully retrieved.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeyPublic"}}}},"401":{"description":"Authentication credentials missing, invalid, expired, or revoked."},"403":{"description":"Missing required `api_keys:read` authorization scope."},"404":{"description":"API key not found or user lacks ownership permissions."},"422":{"description":"Invalid UUID format in path parameter."},"500":{"description":"Database query failure or unexpected server error."}}},"delete":{"tags":["Auth","Auth"],"summary":"Delete API Key","description":"Permanently delete an API key by its UUID and revoke the associated token. This action immediately invalidates the key, preventing any further usage. Returns the metadata of the deleted key for confirmation. Access is restricted to the API key owner and cannot be undone.\n\n**Failure Modes:**\n- **401**: Authentication credentials missing, invalid, expired, or revoked\n- **403**: Missing required `api_keys:write` authorization scope\n- **404**: API key not found or user lacks ownership permissions\n- **422**: Invalid UUID format in path parameter\n- **500**: Database transaction failure or token revocation error\n\n**Required Auth Scopes:**\n- `api_keys:write`","operationId":"delete_api_key","security":[{"HTTPBearer":[]}],"parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string","title":"Uuid"}}],"responses":{"200":{"description":"API key successfully deleted and token revoked.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKeyPublic"}}}},"401":{"description":"Authentication credentials missing, invalid, expired, or revoked."},"403":{"description":"Missing required `api_keys:write` authorization scope."},"404":{"description":"API key not found or user lacks ownership permissions."},"422":{"description":"Invalid UUID format in path parameter."},"500":{"description":"Database transaction failure or token revocation error."}}}},"/auth/login":{"post":{"tags":["Auth"],"summary":"Authenticate User and Issue Access Token","description":"Authenticate a user with email and password credentials, returning a JWT access token with the requested authorization scopes. The returned token enables authenticated access to protected endpoints. If no specific scopes are requested, all available user scopes are granted by default.\n\n**Failure Modes:**\n- **401**: Invalid email/password combination or user not found\n- **403**: Requested authorization scopes exceed user's permissions\n- **422**: Invalid request format or missing required fields\n\n**Required Auth Scopes:**\n- None (public endpoint)","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Authentication successful. Returns a JWT access token and token type that can be used for subsequent authenticated requests.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"401":{"description":"Authentication failed. Either the email does not exist in the system or the password is incorrect."},"403":{"description":"Forbidden. One or more requested authorization scopes are not assigned to this user account."},"422":{"description":"Unprocessable Entity. Request validation failed due to malformed data, missing required fields, or invalid field types."},"500":{"description":"Internal Server Error. An unexpected exception occurred during token generation or database operations."}}}},"/auth/logout":{"post":{"tags":["Auth"],"summary":"Revoke Current Access Token","description":"Revoke the currently authenticated JWT access token, effectively logging out the user. Once revoked, the token cannot be used for authentication until its natural expiration time. This provides secure session termination without requiring server-side session storage.\n\n**Failure Modes:**\n- **401**: Missing, invalid, malformed, or already revoked access token\n- **422**: Invalid request format or missing required fields\n\n**Required Auth Scopes:**\n- Valid bearer token (any scope)","operationId":"logout","responses":{"200":{"description":"Logout successful. The access token has been revoked and can no longer be used for authentication.","content":{"application/json":{"schema":{"type":"boolean","title":"Response Logout"}}}},"401":{"description":"Unauthorized. Token is missing, invalid, malformed, expired, or already revoked. User must authenticate with a valid token."},"422":{"description":"Unprocessable Entity. Request validation failed due to malformed data or invalid field types."},"500":{"description":"Internal Server Error. An unexpected exception occurred during token revocation or database operations."}},"security":[{"HTTPBearer":[]}]}},"/auth/me":{"get":{"tags":["Auth"],"summary":"Get Current User Profile","description":"Retrieve the public profile information of the currently authenticated user. Returns comprehensive user details including company affiliation, case studies, and assigned authorization scopes based on the provided access token.\n\n**Failure Modes:**\n- **401**: Missing, invalid, malformed, expired, or revoked access token\n- **403**: Token lacks required scopes (if any are specified)\n- **422**: Invalid request format or missing required fields\n\n**Required Auth Scopes:**\n- Valid bearer token (any scope)","operationId":"get_profile","responses":{"200":{"description":"User profile retrieved successfully. Returns the complete public user information including company, case studies, and auth scopes.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPublic"}}}},"401":{"description":"Unauthorized. Token is missing, invalid, malformed, expired, or revoked. User must authenticate with a valid token."},"403":{"description":"Forbidden. The provided token does not contain sufficient authorization scopes to access this resource."},"422":{"description":"Unprocessable Entity. Request validation failed due to malformed data or invalid field types."},"500":{"description":"Internal Server Error. An unexpected exception occurred during user profile retrieval or database operations."}},"security":[{"HTTPBearer":[]}]}},"/ingestion/ingest/bulk":{"post":{"tags":["Ingestion"],"summary":"Bulk Ingest File Data for Single Data Source","description":"Upload a CSV or JSON file to ingest data into the current case study when only one data source is configured. The file is uploaded to cloud storage and an asynchronous ingestion job is triggered to process the data.\n\nThis endpoint automatically resolves the data source when only one is configured for the case study. For multiple data sources, use the endpoint with explicit data source ID.\n\n**Failure Modes:**\n- **400**: Invalid file type (only CSV/JSON accepted), multiple data sources found, missing file content type, or cloud storage upload failures\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions for ingestion operations\n- **404**: No data sources configured for the case study\n- **422**: Request body validation errors\n- **500**: Database errors, job triggering failures, or unexpected system errors\n\n**Required Auth Scopes:**\n- `ingestion:write`","operationId":"ingest_bulk_without_data_source","security":[{"HTTPBearer":[]}],"parameters":[{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_ingest_bulk_without_data_source"}}}},"responses":{"200":{"description":"Ingestion job started successfully and is processing in the background.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionResponse"}}}},"400":{"description":"Bad Request – Unsupported file type (only CSV and JSON accepted), multiple data sources found requiring explicit selection, missing file content type, or cloud storage upload permission errors."},"401":{"description":"Unauthorized – Invalid or missing authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for ingestion operations."},"404":{"description":"Not Found – No data sources configured for this case study or case study does not exist."},"422":{"description":"Validation Error – Request body or file upload validation failed."},"500":{"description":"Internal Server Error – Database connection failures, job triggering errors, cloud storage service errors, or unexpected system failures."}}}},"/ingestion/ingest/bulk/{data_source_id}":{"post":{"tags":["Ingestion"],"summary":"Bulk Ingest File Data for Specific Data Source","description":"Upload a CSV or JSON file to ingest data into the current case study for a specific data source. The file is uploaded to cloud storage and an asynchronous ingestion job is triggered to process the data.\n\nUse this endpoint when multiple data sources are configured for the case study and you need to specify which one should receive the data. The data source must exist and be configured for push-based ingestion.\n\n**Failure Modes:**\n- **400**: Invalid file type (only CSV/JSON accepted), invalid data source ID, missing file content type, or cloud storage upload failures\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions for ingestion operations\n- **404**: Specified data source does not exist for this case study\n- **422**: Request body validation errors\n- **500**: Database errors, job triggering failures, or unexpected system errors\n\n**Required Auth Scopes:**\n- `ingestion:write`","operationId":"ingest_bulk_with_data_source","security":[{"HTTPBearer":[]}],"parameters":[{"name":"data_source_id","in":"path","required":true,"schema":{"type":"string","title":"Data Source Id"}},{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_ingest_bulk_with_data_source"}}}},"responses":{"200":{"description":"Ingestion job started successfully and is processing in the background.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionResponse"}}}},"400":{"description":"Bad Request – Unsupported file type (only CSV and JSON accepted), invalid data source ID, missing file content type, or cloud storage upload permission errors."},"401":{"description":"Unauthorized – Invalid or missing authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for ingestion operations."},"404":{"description":"Not Found – The specified data source does not exist for this case study or is not configured for push-based ingestion."},"422":{"description":"Validation Error – Request body or file upload validation failed."},"500":{"description":"Internal Server Error – Database connection failures, job triggering errors, cloud storage service errors, or unexpected system failures."}}}},"/ingestion/ingest":{"post":{"tags":["Ingestion"],"summary":"Ingest JSON Payload Data for Single Data Source","description":"Ingest data into the current case study by providing a JSON payload when only one data source is configured. The payload is uploaded to cloud storage and an asynchronous ingestion job is triggered to process the data.\n\nThis endpoint automatically resolves the data source when only one is configured for the case study. For multiple data sources, use the endpoint with explicit data source ID.\n\n**Failure Modes:**\n- **400**: Invalid data source ID, multiple data sources found, or cloud storage upload failures\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions for ingestion operations\n- **404**: No data sources configured for the case study\n- **422**: Request body validation errors\n- **500**: Database errors, job triggering failures, or unexpected system errors\n\n**Required Auth Scopes:**\n- `ingestion:write`","operationId":"ingest_without_data_source","security":[{"HTTPBearer":[]}],"parameters":[{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionDTO"}}}},"responses":{"200":{"description":"Ingestion job started successfully and is processing in the background.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionResponse"}}}},"400":{"description":"Bad Request – Multiple data sources found requiring explicit selection, invalid data source configuration, or cloud storage upload permission errors."},"401":{"description":"Unauthorized – Invalid or missing authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for ingestion operations."},"404":{"description":"Not Found – No data sources configured for this case study or case study does not exist."},"422":{"description":"Validation Error – Request body validation failed for the JSON payload structure."},"500":{"description":"Internal Server Error – Database connection failures, job triggering errors, cloud storage service errors, or unexpected system failures."}}}},"/ingestion/ingest/{data_source_id}":{"post":{"tags":["Ingestion"],"summary":"Ingest JSON Payload Data for Specific Data Source","description":"Ingest data into the current case study for a specific data source by providing a JSON payload. The payload is uploaded to cloud storage and an asynchronous ingestion job is triggered to process the data.\n\nUse this endpoint when multiple data sources are configured for the case study and you need to specify which one should receive the data. The data source must exist and be configured for push-based ingestion.\n\n**Failure Modes:**\n- **400**: Invalid data source ID or cloud storage upload failures\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions for ingestion operations\n- **404**: Specified data source does not exist for this case study\n- **422**: Request body validation errors\n- **500**: Database errors, job triggering failures, or unexpected system errors\n\n**Required Auth Scopes:**\n- `ingestion:write`","operationId":"ingest_with_data_source","security":[{"HTTPBearer":[]}],"parameters":[{"name":"data_source_id","in":"path","required":true,"schema":{"type":"string","title":"Data Source Id"}},{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionDTO"}}}},"responses":{"200":{"description":"Ingestion job started successfully and is processing in the background.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestionResponse"}}}},"400":{"description":"Bad Request – Invalid data source ID or cloud storage upload permission errors."},"401":{"description":"Unauthorized – Invalid or missing authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for ingestion operations."},"404":{"description":"Not Found – The specified data source does not exist for this case study or is not configured for push-based ingestion."},"422":{"description":"Validation Error – Request body validation failed for the JSON payload structure."},"500":{"description":"Internal Server Error – Database connection failures, job triggering errors, cloud storage service errors, or unexpected system failures."}}}},"/grids/retrive":{"get":{"tags":["Grids"],"summary":"Get Grid For Single Data Scenario","description":"Retrieves the grid configuration for a case study when only one data scenario is available. This endpoint automatically selects the single data scenario and returns the grid data for the specified location and grid type. The response includes zoning metadata and the complete grid definition in GeoJSON format.\n\n**Failure Modes:**\n- **400**: Multiple data scenarios exist for the case study, or invalid location/grid type combination\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions for grid:read scope\n- **404**: Case study config not found, no data scenarios found, or specified data scenario not found\n- **422**: Request validation errors (invalid grid_type, missing location)\n- **500**: Grid file not found in storage, JSON parsing errors, or database connection failures\n\n**Required Auth Scopes:**\n- `grid:read`","operationId":"retrive_grid","security":[{"HTTPBearer":[]}],"parameters":[{"name":"grid_type","in":"query","required":true,"schema":{"enum":["squares","categorical"],"type":"string","title":"Grid Type"}},{"name":"tile_size","in":"query","required":true,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tile Size"}},{"name":"location","in":"query","required":true,"schema":{"type":"string","title":"Location"}},{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"responses":{"200":{"description":"Grid configuration retrieved successfully with metadata and GeoJSON data.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GridSchema"}}}},"400":{"description":"Multiple data scenarios found for case study (must specify one explicitly), or invalid location/grid type combination for the data scenario."},"401":{"description":"Unauthorized – Invalid or missing authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for required grid:read scope."},"404":{"description":"Case study configuration not found in database, no data scenarios configured for case study, or specified data scenario not found."},"422":{"description":"Validation error – Invalid request parameters such as unsupported grid_type values or missing required location field."},"500":{"description":"Internal server error – Grid GeoJSON file not found in storage, invalid JSON format in stored grid file, database connection failures, or storage access errors."}}}},"/grids/retrive/{data_scenario_id}":{"get":{"tags":["Grids"],"summary":"Get Grid For Specific Data Scenario","description":"Retrieves the grid configuration for a specific case study and data scenario combination. This endpoint allows clients to explicitly specify which data scenario to use when multiple scenarios are available. The response includes zoning metadata and the complete grid definition in GeoJSON format.\n\n**Failure Modes:**\n- **400**: Invalid location/grid type combination for the specified data scenario\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions for grid:read scope\n- **404**: Case study config not found, specified data scenario not found, or invalid data scenario ID\n- **422**: Request validation errors (invalid grid_type, missing location, malformed data_scenario_id)\n- **500**: Grid file not found in storage, JSON parsing errors, or database connection failures\n\n**Required Auth Scopes:**\n- `grid:read`","operationId":"retrive_grid_by_data_scenario","security":[{"HTTPBearer":[]}],"parameters":[{"name":"data_scenario_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the data scenario to use for grid retrieval.","title":"Data Scenario Id"},"description":"The ID of the data scenario to use for grid retrieval.","example":"test-scenario-123"},{"name":"grid_type","in":"query","required":true,"schema":{"enum":["squares","categorical"],"type":"string","title":"Grid Type"}},{"name":"tile_size","in":"query","required":true,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tile Size"}},{"name":"location","in":"query","required":true,"schema":{"type":"string","title":"Location"}},{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"responses":{"200":{"description":"Grid configuration retrieved successfully with metadata and GeoJSON data.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GridSchema"}}}},"400":{"description":"Invalid location/grid type combination for the specified data scenario."},"401":{"description":"Unauthorized – Invalid or missing authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for required grid:read scope."},"404":{"description":"Case study configuration not found in database, specified data scenario not found, or invalid data scenario ID provided."},"422":{"description":"Validation error – Invalid request parameters such as unsupported grid_type values, missing required location field, or malformed data_scenario_id path parameter."},"500":{"description":"Internal server error – Grid GeoJSON file not found in storage, invalid JSON format in stored grid file, database connection failures, or storage access errors."}}}},"/forecast/":{"post":{"tags":["Forecast"],"summary":"Get Forecasted Demand","description":"Retrieve demand forecast predictions for a case study based on the configured forecast type and applied filters. This endpoint automatically determines the forecast type from the case study configuration and returns time-series predictions aggregated by spatial zones.\n\n**Failure Modes:**\n- **400**: Invalid filters (unsupported location, granularity, or grid type) or multiple forecast types configured requiring explicit selection\n- **401**: Invalid or missing Bearer token credentials\n- **403**: Insufficient permissions (missing 'forecast:read' scope) or user lacks access to the specified case study\n- **404**: No forecast types configured for the case study or specified forecast type not found in configuration\n- **422**: Invalid request data that fails Pydantic validation\n- **500**: Missing configuration data, malformed prediction data, or inability to locate any viable predictions\n\n**Required Auth Scopes:**\n- `forecast:read`\n\n**Supported Forecast Types:**\n- `demand` - Demand forecast predictions aggregated by spatial zones.\n- `unsatisfied-demand` - Unsatisfied demand forecast predictions aggregated byspatial zones.","operationId":"get_forecast","security":[{"HTTPBearer":[]}],"parameters":[{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastFilters"}}}},"responses":{"200":{"description":"Successfully retrieved forecast predictions with time periods and zone-aggregated values.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastReponse"}}}},"400":{"description":"Invalid filters - location, time granularity, prediction horizon, or grid type not supported by the forecast configuration, or multiple forecast types found requiring explicit selection."},"401":{"description":"Authentication failed - invalid, missing, or malformed Bearer token credentials."},"403":{"description":"Access forbidden - insufficient permissions (missing 'forecast:read' scope), user does not have access to the specified case study, or user has no case study access."},"404":{"description":"Resource not found - no forecast types configured for the case study or specified forecast type not found in case study configuration."},"422":{"description":"Validation error - request body contains invalid data that fails Pydantic model validation."},"500":{"description":"Server error - missing forecast or data ingestion configuration, malformed prediction data structure, or inability to locate any viable prediction files."}}}},"/forecast/{forecast_type}":{"post":{"tags":["Forecast"],"summary":"Get Forecasted Demand by Type","description":"Retrieve demand forecast predictions for a specific forecast type within a case study. This endpoint allows explicit selection of the forecast type when multiple types are configured, providing time-series predictions aggregated by spatial zones for the specified forecast model.\n\n**Failure Modes:**\n- **400**: Invalid filters (unsupported location, granularity, or grid type) for the specified forecast type\n- **401**: Invalid or missing Bearer token credentials\n- **403**: Insufficient permissions (missing 'forecast:read' scope) or user lacks access to the specified case study\n- **404**: Specified forecast type not found in case study configuration\n- **422**: Invalid request data that fails Pydantic validation\n- **500**: Missing configuration data, malformed prediction data, or inability to locate any viable predictions\n\n**Required Auth Scopes:**\n- `forecast:read`\n\n**Supported Forecast Types:**\n- `demand` - Demand forecast predictions aggregated by spatial zones.\n- `unsatisfied-demand` - Unsatisfied demand forecast predictions aggregated byspatial zones.","operationId":"get_forecast_by_type","security":[{"HTTPBearer":[]}],"parameters":[{"name":"forecast_type","in":"path","required":true,"schema":{"type":"string","title":"Forecast Type"}},{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastFilters"}}}},"responses":{"200":{"description":"Successfully retrieved forecast predictions for the specified type with time periods and zone-aggregated values.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastReponse"}}}},"400":{"description":"Invalid filters - location, time granularity, prediction horizon, or grid type not supported by the specified forecast type configuration."},"401":{"description":"Authentication failed - invalid, missing, or malformed Bearer token credentials."},"403":{"description":"Access forbidden - insufficient permissions (missing 'forecast:read' scope), user does not have access to the specified case study, or user has no case study access."},"404":{"description":"Resource not found - specified forecast type not found in case study configuration."},"422":{"description":"Validation error - request body contains invalid data that fails Pydantic model validation."},"500":{"description":"Server error - missing forecast or data ingestion configuration, malformed prediction data structure, or inability to locate any viable prediction files."}}}},"/operations/imbalance":{"post":{"tags":["Operations"],"summary":"Get Imbalance Snapshot","description":"Calculate and retrieve vehicle distribution imbalance for zones within a \nspecified time range. Imbalance is defined as the difference between actual \ndeployed vehicles and forecasted demand per zone, helping identify zones with \nhigh demand and low supply for resource allocation optimization.\n\n**Failure Modes:**\n- **400**: Invalid request parameters or multiple case studies require \n  explicit selection\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions or no access to case study\n- **422**: Invalid request data that fails validation\n- **500**: Prediction data unavailable, configuration not loaded, or provider \n  communication failure\n- **501**: Unsupported provider specified in configuration\n\n**Required Auth Scopes:**\n- `imbalance:read`","operationId":"get_demand_imbalance","security":[{"HTTPBearer":[]}],"parameters":[{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImbalanceFilters"}}}},"responses":{"200":{"description":"Imbalance snapshot retrieved successfully with periods and zone-wise imbalance data.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImbalanceResponse"}}}},"400":{"description":"Bad Request – Multiple case studies available, explicit selection required via X-Case-Study header."},"401":{"description":"Unauthorized – Invalid or missing credentials."},"403":{"description":"Forbidden – Insufficient permissions or no access to specified case study."},"422":{"description":"Unprocessable Entity – Invalid request data that fails Pydantic validation."},"500":{"description":"Internal Server Error – Prediction data unavailable, configuration not loaded, or system error."},"501":{"description":"Not Implemented – Provider specified in configuration is not supported for imbalance operations."}}}},"/operations/rebalance":{"post":{"tags":["Operations"],"summary":"Get Rebalancing Suggestions","description":"Generate actionable rebalancing suggestions for zones based on imbalance data \nand vehicle status. This endpoint analyzes current vehicle distribution and \nbattery levels to recommend operations such as pickups, dropoffs, and battery \nswaps to optimize service efficiency and meet demand.\n\n**Failure Modes:**\n- **400**: Invalid request parameters or multiple case studies require \n  explicit selection\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions or no access to case study\n- **422**: Invalid request data that fails validation\n- **500**: Prediction data unavailable, configuration not loaded, or provider \n  communication failure\n- **501**: Unsupported provider specified in configuration\n\n**Required Auth Scopes:**\n- `rebalance:read`","operationId":"get_rebalancing_suggestions","security":[{"HTTPBearer":[]}],"parameters":[{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RebalancingFilters"}}}},"responses":{"200":{"description":"Rebalancing suggestions retrieved successfully with recommended operations for optimization.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RebalancingResponse"}}}},"400":{"description":"Bad Request – Multiple case studies available, explicit selection required via X-Case-Study header."},"401":{"description":"Unauthorized – Invalid or missing credentials."},"403":{"description":"Forbidden – Insufficient permissions or no access to specified case study."},"422":{"description":"Unprocessable Entity – Invalid request data that fails Pydantic validation."},"500":{"description":"Internal Server Error – Prediction data unavailable, configuration not loaded, or system error."},"501":{"description":"Not Implemented – Provider specified in configuration is not supported for rebalancing operations."}}}},"/operations/routing":{"post":{"tags":["Operations"],"summary":"Solve Routing Optimization","description":"Generate an optimized routing plan for a vehicle to efficiently execute a pool \nof operations within specified constraints. This endpoint uses vehicle routing \nalgorithms to determine the best sequence of operations considering capacity \nlimits, time constraints, and geographic locations.\n\n**Failure Modes:**\n- **400**: Invalid request parameters or multiple case studies require \n  explicit selection\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions or no access to case study\n- **422**: Invalid request data that fails validation (invalid coordinates, \n  negative capacities, etc.)\n- **500**: Internal server error during routing optimization\n\n**Required Auth Scopes:**\n- `redistribution:read`","operationId":"solve_routing","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoutingPayload"}}},"required":true},"responses":{"200":{"description":"Routing plan generated successfully with optimized sequence of operations and timing.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoutingResponse"}}}},"400":{"description":"Bad Request – Multiple case studies available, explicit selection required via X-Case-Study header."},"401":{"description":"Unauthorized – Invalid or missing credentials."},"403":{"description":"Forbidden – Insufficient permissions or no access to specified case study."},"422":{"description":"Unprocessable Entity – Invalid request data such as invalid coordinates, negative capacities, or malformed operations."},"500":{"description":"Internal Server Error – Unexpected error during routing optimization or system failure."}},"security":[{"HTTPBearer":[]}]}},"/monitoring/":{"get":{"tags":["Monitoring"],"summary":"Get Global Monitoring Information","description":"Retrieve comprehensive monitoring information for all ingestion and forecast services within the current case study. This endpoint aggregates health status, timing data, and progress indicators across all data sources and forecast types, providing a unified view of system operational state.\n\n**Failure Modes:**\n- **400**: User has access to multiple case studies but no X-Case-Study header provided\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions or no case study access\n- **422**: Request validation failed\n- **500**: Database or internal service error\n\n**Required Auth Scopes:**\n- `monitor:forecast`\n- `monitor:ingestion`","operationId":"get_global_monitoring","security":[{"HTTPBearer":[]}],"parameters":[{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"responses":{"200":{"description":"Comprehensive monitoring information retrieved successfully with aggregated data for all services.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonitoringResponse"}}}},"400":{"description":"Bad Request – User has access to multiple case studies but X-Case-Study header not provided."},"401":{"description":"Unauthorized – Invalid, missing, or expired authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for required scopes or no case study access."},"422":{"description":"Validation Error – Request parameters failed Pydantic validation."},"500":{"description":"Internal Server Error – Database connection failure or unexpected system error."}}}},"/monitoring/ingestion":{"get":{"tags":["Monitoring"],"summary":"Get All Ingestion Monitoring Information","description":"Retrieve monitoring information for all ingestion processes within the current case study. This endpoint provides detailed status, timing data, and progress indicators for each data source's ingestion pipeline, including both active and completed processes.\n\n**Failure Modes:**\n- **400**: User has access to multiple case studies but no X-Case-Study header provided\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions or no case study access\n- **422**: Request validation failed\n- **500**: Database or internal service error\n\n**Required Auth Scopes:**\n- `monitor:ingestion`","operationId":"get_ingest_monitoring","security":[{"HTTPBearer":[]}],"parameters":[{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"responses":{"200":{"description":"Ingestion monitoring information retrieved successfully for all data sources.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MonitorIngestionResponse"},"title":"Response Get Ingest Monitoring"}}}},"400":{"description":"Bad Request – User has access to multiple case studies but X-Case-Study header not provided."},"401":{"description":"Unauthorized – Invalid, missing, or expired authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for monitor:ingestion scope or no case study access."},"422":{"description":"Validation Error – Request parameters failed Pydantic validation."},"500":{"description":"Internal Server Error – Database connection failure or unexpected system error."}}}},"/monitoring/ingestion/{data_source}":{"get":{"tags":["Monitoring"],"summary":"Get Ingestion Monitoring for Specific Data Source","description":"Retrieve monitoring information for a specific data source's ingestion process within the current case study. Returns detailed status, timing data, and progress indicators for the requested data source's pipeline.\n\n**Failure Modes:**\n- **400**: User has access to multiple case studies but no X-Case-Study header provided\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions or no case study access\n- **404**: No ingestion activities found for the specified data source\n- **409**: Multiple results found for the specified data source (data inconsistency)\n- **422**: Request validation failed\n- **500**: Database or internal service error\n\n**Required Auth Scopes:**\n- `monitor:ingestion`","operationId":"ingest_monitoring_with_data_source","security":[{"HTTPBearer":[]}],"parameters":[{"name":"data_source","in":"path","required":true,"schema":{"type":"string","title":"Data Source"}},{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"responses":{"200":{"description":"Monitoring information for the specified data source retrieved successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MonitorIngestionResponse"}}}},"400":{"description":"Bad Request – User has access to multiple case studies but X-Case-Study header not provided."},"401":{"description":"Unauthorized – Invalid, missing, or expired authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for monitor:ingestion scope or no case study access."},"404":{"description":"Not Found – No ingestion activities found for the specified data source."},"409":{"description":"Conflict – Multiple results found for the specified data source, indicating data inconsistency."},"422":{"description":"Validation Error – Request parameters failed Pydantic validation."},"500":{"description":"Internal Server Error – Database connection failure or unexpected system error."}}}},"/monitoring/forecast":{"get":{"tags":["Monitoring"],"summary":"Get All Forecast Monitoring Information","description":"Retrieve monitoring information for all forecast processes within the current case study. This endpoint provides detailed status, timing data, and progress indicators for each forecast type, including both active and completed forecasting processes.\n\n**Failure Modes:**\n- **400**: User has access to multiple case studies but no X-Case-Study header provided\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions or no case study access\n- **422**: Request validation failed\n- **500**: Database or internal service error\n\n**Required Auth Scopes:**\n- `monitor:forecast`","operationId":"get_forecast_monitoring","security":[{"HTTPBearer":[]}],"parameters":[{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"responses":{"200":{"description":"Forecast monitoring information retrieved successfully for all forecast types.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ForecastMonitoringResponse"},"title":"Response Get Forecast Monitoring"}}}},"400":{"description":"Bad Request – User has access to multiple case studies but X-Case-Study header not provided."},"401":{"description":"Unauthorized – Invalid, missing, or expired authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for monitor:forecast scope or no case study access."},"422":{"description":"Validation Error – Request parameters failed Pydantic validation."},"500":{"description":"Internal Server Error – Database connection failure or unexpected system error."}}}},"/monitoring/forecast/{forecast_type}":{"get":{"tags":["Monitoring"],"summary":"Get Forecast Monitoring for Specific Forecast Type","description":"Retrieve monitoring information for a specific forecast type within the current case study. Returns detailed status, timing data, and progress indicators for the requested forecast type's processes.\n\n**Failure Modes:**\n- **400**: User has access to multiple case studies but no X-Case-Study header provided\n- **401**: Invalid or missing authentication credentials\n- **403**: Insufficient permissions or no case study access\n- **404**: No forecast activities found for the specified forecast type\n- **409**: Multiple results found for the specified forecast type (data inconsistency)\n- **422**: Request validation failed\n- **500**: Database or internal service error\n\n**Required Auth Scopes:**\n- `monitor:forecast`","operationId":"forecast_monitoring_with_data_source","security":[{"HTTPBearer":[]}],"parameters":[{"name":"forecast_type","in":"path","required":true,"schema":{"type":"string","title":"Forecast Type"}},{"name":"X-Case-Study","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Case-Study"}}],"responses":{"200":{"description":"Monitoring information for the specified forecast type retrieved successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastMonitoringResponse"}}}},"400":{"description":"Bad Request – User has access to multiple case studies but X-Case-Study header not provided."},"401":{"description":"Unauthorized – Invalid, missing, or expired authentication credentials."},"403":{"description":"Forbidden – Insufficient permissions for monitor:forecast scope or no case study access."},"404":{"description":"Not Found – No forecast activities found for the specified forecast type."},"409":{"description":"Conflict – Multiple results found for the specified forecast type, indicating data inconsistency."},"422":{"description":"Validation Error – Request parameters failed Pydantic validation."},"500":{"description":"Internal Server Error – Database connection failure or unexpected system error."}}}},"/monitoring/ping":{"get":{"tags":["Monitoring"],"summary":"Health Check Ping","description":"Perform a simple health check to verify that the monitoring API is alive and responsive. This endpoint requires no authentication and returns a static response to confirm service availability.","operationId":"ping","responses":{"200":{"description":"API is alive and responsive, returning a simple pong response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PongResponse"}}}},"500":{"description":"Internal Server Error – Unexpected error occurred during health check processing."}}}}},"components":{"schemas":{"ApiKeyCreate":{"properties":{"name":{"type":"string","title":"Name","description":"Name of the new API key."},"exp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Exp","description":"Optional expiration datetime for the API key. Defaults to no expiration."},"auth_scopes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Auth Scopes","description":"Optional list of authorization scopes for the API key. Defaults to all scopes."}},"type":"object","required":["name"],"title":"ApiKeyCreate","description":"Schema for creating a new API key.\n\nUsed in API requests to create a new API key resource, optionally specifying\nexpiration and scopes."},"ApiKeyFirstTimePublic":{"properties":{"uuid":{"type":"string","title":"Uuid","description":"Unique UUID identifier for the API key."},"name":{"type":"string","title":"Name","description":"Name of the API key."},"exp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Exp","description":"Expiration datetime of the API key, if set."},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Datetime when the API key was created."},"auth_scopes":{"items":{"$ref":"#/components/schemas/AuthScopePublic"},"type":"array","title":"Auth Scopes","description":"List of authorization scopes assigned to the API key."},"key":{"type":"string","title":"Key","description":"The actual API key string, only returned at creation time."}},"type":"object","required":["uuid","name","created_at","auth_scopes","key"],"title":"ApiKeyFirstTimePublic","description":"Public schema for an API key returned at creation time.\n\nExtends ApiKeyPublic to include the actual key string, which is only shown once at\ncreation."},"ApiKeyPublic":{"properties":{"uuid":{"type":"string","title":"Uuid","description":"Unique UUID identifier for the API key."},"name":{"type":"string","title":"Name","description":"Name of the API key."},"exp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Exp","description":"Expiration datetime of the API key, if set."},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Datetime when the API key was created."},"auth_scopes":{"items":{"$ref":"#/components/schemas/AuthScopePublic"},"type":"array","title":"Auth Scopes","description":"List of authorization scopes assigned to the API key."}},"type":"object","required":["uuid","name","created_at","auth_scopes"],"title":"ApiKeyPublic","description":"Public schema for an API key resource.\n\nExposes API key metadata and associated authorization scopes to API consumers."},"AuthScopePublic":{"properties":{"slug":{"type":"string","title":"Slug","description":"Unique slug identifier for the authorization scope."},"description":{"type":"string","title":"Description","description":"Description of the authorization scope."}},"type":"object","required":["slug","description"],"title":"AuthScopePublic","description":"Public schema for an authorization scope.\n\nExposes information about an available authorization scope to API consumers."},"BatterySwapConfig":{"properties":{"threshold":{"type":"integer","title":"Threshold","description":"Threshold value for the strategy, e.g., battery level"},"urgency_levels":{"$ref":"#/components/schemas/UrgencyLevel","description":"Urgency levels for the strategy, e.g., low, medium, high"},"reason":{"type":"string","title":"Reason","description":"Reason for the strategy, e.g., battery level is low"}},"type":"object","required":["threshold","urgency_levels","reason"],"title":"BatterySwapConfig","description":"Configuration for the battery swap strategy.\n\nInherits all fields from StrategyConfig."},"Body_ingest_bulk_with_data_source":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_ingest_bulk_with_data_source"},"Body_ingest_bulk_without_data_source":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_ingest_bulk_without_data_source"},"CaseStudyPublic":{"properties":{"slug":{"type":"string","title":"Slug","description":"Unique slug identifier for the case study."},"title":{"type":"string","title":"Title","description":"Title of the case study."},"description":{"type":"string","title":"Description","description":"Description of the case study."},"company_slug":{"type":"string","title":"Company Slug","description":"Slug of the company associated with the case study."},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Datetime when the case study was created."},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Datetime when the case study was last updated, if available."}},"type":"object","required":["slug","title","description","company_slug","created_at"],"title":"CaseStudyPublic","description":"Public schema for a case study resource.\n\nExposes case study information to API consumers, omitting sensitive fields."},"CompanyPublic":{"properties":{"name":{"type":"string","title":"Name","description":"Name of the company."},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Datetime when the company was created."},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Datetime when the company was last updated, if available."},"case_studies":{"items":{"$ref":"#/components/schemas/CaseStudyPublic"},"type":"array","title":"Case Studies","description":"List of public case studies associated with the company."}},"type":"object","required":["name","created_at","case_studies"],"title":"CompanyPublic","description":"Public schema for a company resource.\n\nExposes company information and related case studies to API consumers."},"DropoffConfig":{"properties":{"threshold":{"type":"integer","title":"Threshold","description":"Threshold value for the strategy, e.g., battery level"},"urgency_levels":{"$ref":"#/components/schemas/UrgencyLevel","description":"Urgency levels for the strategy, e.g., low, medium, high"},"reason":{"type":"string","title":"Reason","description":"Reason for the strategy, e.g., battery level is low"}},"type":"object","required":["threshold","urgency_levels","reason"],"title":"DropoffConfig","description":"Configuration for the dropoff strategy.\n\nInherits all fields from StrategyConfig."},"ForecastFilters":{"properties":{"time_granularity_minutes":{"type":"integer","title":"Time Granularity Minutes","description":"Time granularity in minutes for the forecast"},"prediction_horizon_size":{"type":"integer","title":"Prediction Horizon Size","description":"Size of the prediction horizon in time steps (each one long `time_granularity_minutes` minutes)"},"grid":{"$ref":"#/components/schemas/GridFilters","description":"Grid schema defining the spatial structure for the forecast"}},"type":"object","required":["time_granularity_minutes","prediction_horizon_size","grid"],"title":"ForecastFilters","description":"Defines the filters applicable to a forecast request.\n\nThis schema includes parameters such as location, time granularity,\nprediction horizon, and grid details."},"ForecastMonitoringResponse":{"properties":{"in_progress":{"type":"boolean","title":"In Progress","description":"Indicates if the forecast process is currently running."},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At","description":"Timestamp when the forecast process started, or None if not started."},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At","description":"Timestamp when the forecast process ended, or None if still running."},"last_completed":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Completed","description":"Timestamp of the last successfully completed forecast, or None if never completed."},"type":{"type":"string","title":"Type","description":"Type or category of the forecast process."},"aborted":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Aborted","description":"Reason for abortion if the process was aborted, otherwise None."}},"type":"object","required":["in_progress","started_at","ended_at","last_completed","type","aborted"],"title":"ForecastMonitoringResponse","description":"Schema representing the status and timing of a forecast monitoring process.\n\nCaptures the progress, type, and outcome details for a single forecast\nmonitoring run, including timestamps and any abort reason."},"ForecastReponse":{"properties":{"periods":{"items":{"type":"string","format":"date-time"},"type":"array","title":"Periods","description":"List of time buckets for which the forecast is provided"},"zones":{"additionalProperties":{"items":{"type":"number"},"type":"array"},"type":"object","title":"Zones","description":"List of forecast zones with their forecasted values","examples":[{"12":[4.2],"33":[3.1],"42":[0.8]}]}},"type":"object","required":["periods","zones"],"title":"ForecastReponse","description":"Represents the response structure for a forecast request.\n\nThis schema includes the time periods and forecasted values for different zones."},"GridFilters":{"properties":{"grid_type":{"type":"string","enum":["squares","categorical"],"title":"Grid Type","description":"Type of grid for the forecast, either 'squares' or 'categorical'"},"tile_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tile Size","description":"Size of each tile side in the grid (in meters). Can be null if the grid is categorical for example"},"location":{"type":"string","title":"Location","description":"Location for which the forecast is requested"}},"type":"object","required":["grid_type","tile_size","location"],"title":"GridFilters","description":"Schema for filtering grid forecasts.\nThis schema defines the parameters used to filter grid forecasts based on\ngrid type, tile size, and location. It is used to ensure that the forecast\nrequests are structured correctly and contain all necessary information."},"GridSchema":{"properties":{"zoning_type":{"type":"string","title":"Zoning Type","description":"Type of zoning applied to the grid (e.g., residential, commercial, industrial)."},"zoning_size_meters":{"type":"integer","title":"Zoning Size Meters","description":"Size of each zoning area in meters."},"location":{"type":"string","title":"Location","description":"Geographical location or identifier for the grid."},"grid":{"additionalProperties":true,"type":"object","title":"Grid","description":"Dictionary containing the grid data structure, typically representing spatial or zoning information.","examples":[{"features":[{"geometry":{"coordinates":[[[-122.4194,37.7749],[-122.4194,37.7849],[-122.4094,37.7849],[-122.4094,37.7749],[-122.4194,37.7749]]],"type":"Polygon"},"properties":{"zone_id":"42"},"type":"Feature"}],"type":"FeatureCollection"}]}},"type":"object","required":["zoning_type","zoning_size_meters","location","grid"],"title":"GridSchema","description":"Schema representing a spatial grid with zoning and location metadata.\n\nThis schema is used to define the structure of a grid, including its zoning type,\nsize, location, and the grid data itself. It is typically used for validating and\nserializing grid-related data in the application, ensuring consistency and clarity\nwhen exchanging grid information between components or APIs."},"ImbalanceFilters":{"properties":{"time_granularity_minutes":{"type":"integer","title":"Time Granularity Minutes","description":"Time granularity in minutes for the forecast"},"prediction_horizon_size":{"type":"integer","title":"Prediction Horizon Size","description":"Size of the prediction horizon in time steps (each one long `time_granularity_minutes` minutes)"},"grid":{"$ref":"#/components/schemas/GridFilters","description":"Grid schema defining the spatial structure for the forecast"}},"type":"object","required":["time_granularity_minutes","prediction_horizon_size","grid"],"title":"ImbalanceFilters","description":"Defines the filters applicable to an imbalance snapshot request.\n\nThis schema includes parameters such as location, time granularity,\nprediction horizon, and grid details."},"ImbalanceResponse":{"properties":{"periods":{"items":{"type":"string","format":"date-time"},"type":"array","title":"Periods","description":"list of time buckets for which the imbalance is provided"},"zones":{"additionalProperties":{"items":{"type":"number"},"type":"array"},"type":"object","title":"Zones","description":"list of forecast zones with their imbalance values. Is calculated as difference between actual provided services and forecasted demand"}},"type":"object","required":["periods","zones"],"title":"ImbalanceResponse","description":"Represents the response structure for an imbalance snapshot.\n\nThis schema includes the time periods and imbalance values for different zones."},"IngestionDTO":{"properties":{"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"items":{},"type":"array"}],"title":"Data","description":"The data payload to be ingested. Can be a dictionary or a list, depending on the ingestion use case."}},"type":"object","required":["data"],"title":"IngestionDTO","description":"Data Transfer Object for ingestion requests.\n\nThis schema is used to encapsulate the data payload submitted for ingestion.\nIt supports both dictionary and list formats to accommodate various data\nstructures that may be ingested by the system."},"IngestionResponse":{"properties":{"still_in_progress":{"type":"boolean","title":"Still In Progress","description":"Flag indicating if the ingestion process is still running (True) or has completed (False)."}},"type":"object","required":["still_in_progress"],"title":"IngestionResponse","description":"Response schema indicating the status of an ingestion operation.\n\nThis model communicates whether the ingestion process is still ongoing or\nhas completed, allowing clients to poll or react accordingly."},"LoginRequest":{"properties":{"email":{"type":"string","title":"Email","description":"User's email address used for login."},"password":{"type":"string","title":"Password","description":"User's password."},"auth_scopes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Auth Scopes","description":"Optional list of requested authorization scopes."}},"type":"object","required":["email","password"],"title":"LoginRequest","description":"Request schema for user login.\n\nUsed to submit user credentials and optional scopes for authentication."},"MonitorIngestionResponse":{"properties":{"in_progress":{"type":"boolean","title":"In Progress","description":"Indicates if the ingestion process is currently running."},"started_at":{"type":"string","format":"date-time","title":"Started At","description":"Timestamp when the ingestion process started."},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At","description":"Timestamp when the ingestion process ended, or None if still running."},"last_completed":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Completed","description":"Timestamp of the last successfully completed ingestion, or None if never completed."},"acquisition_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Acquisition Time","description":"Timestamp when data acquisition finished, or None if not yet completed."},"parsing_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Parsing Time","description":"Timestamp when data parsing finished, or None if not yet completed."},"aggregation_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Aggregation Time","description":"Timestamp when data aggregation finished, or None if not yet completed."},"aborted":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Aborted","description":"Reason for abortion if the process was aborted, otherwise None."},"data_source":{"type":"string","title":"Data Source","description":"Identifier for the data source being ingested."}},"type":"object","required":["in_progress","started_at","ended_at","last_completed","acquisition_time","parsing_time","aggregation_time","aborted","data_source"],"title":"MonitorIngestionResponse","description":"Schema representing the status and timing of a data ingestion monitoring process.\n\nCaptures the progress, timing, and outcome details for a single ingestion\nmonitoring run, including timestamps for each stage and any abort reason."},"MonitoringResponse":{"properties":{"ingestion":{"items":{"$ref":"#/components/schemas/MonitorIngestionResponse"},"type":"array","title":"Ingestion","description":"List of ingestion monitoring results."},"forecast":{"items":{"$ref":"#/components/schemas/ForecastMonitoringResponse"},"type":"array","title":"Forecast","description":"List of forecast monitoring results."}},"type":"object","required":["ingestion","forecast"],"title":"MonitoringResponse","description":"Aggregated monitoring response schema for ingestion and forecast processes.\n\nProvides lists of ingestion and forecast monitoring results, each containing\ndetailed status and timing information for their respective processes."},"Operation":{"properties":{"vehicle_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vehicle Id","description":"Vehicle ID associated with the operation"},"latitude":{"type":"number","title":"Latitude","description":"Latitude of the operation's location"},"longitude":{"type":"number","title":"Longitude","description":"Longitude of the operation's location"},"zone_id":{"type":"integer","title":"Zone Id","description":"Zone ID where the operation is located"},"operation_type":{"type":"string","enum":["pickup","dropoff","battery_swap"],"title":"Operation Type","description":"Type of operation, e.g., pickup, dropoff, or battery swap"},"priority":{"type":"string","enum":["low","medium","high"],"title":"Priority","description":"Priority level of the operation, e.g., low, medium, or high"},"reason":{"type":"string","title":"Reason","description":"Reason for the operation, e.g., imbalance deficit or idle time"}},"type":"object","required":["vehicle_id","latitude","longitude","zone_id","operation_type","priority","reason"],"title":"Operation","description":"Represents an operation to be performed.\n\nThis schema includes details such as the operation's location, type,\npriority, and associated vehicle."},"PickupConfig":{"properties":{"idle_time":{"$ref":"#/components/schemas/StrategyConfig","description":"Configuration for the pickup strategy based on idle time"},"imbalance":{"$ref":"#/components/schemas/StrategyConfig","description":"Configuration for the pickup strategy based on imbalance"}},"type":"object","required":["idle_time","imbalance"],"title":"PickupConfig","description":"Configuration for the pickup strategy.\n\nThis schema includes configurations for idle time and imbalance-based\npickup strategies."},"Point":{"properties":{"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"}},"type":"object","required":["latitude","longitude"],"title":"Point","description":"Represents a geographical point with latitude and longitude."},"PongResponse":{"properties":{"ping":{"type":"string","const":"pong","title":"Ping","description":"Static response string indicating the service is alive."}},"type":"object","required":["ping"],"title":"PongResponse","description":"Schema for a simple ping-pong health check response.\n\nUsed to verify the API is responsive. Returns a static string 'pong' in\nresponse to a ping request."},"RebalanceConfig":{"properties":{"battery_swap":{"$ref":"#/components/schemas/BatterySwapConfig","description":"Configuration for the battery swap strategy"},"pickup":{"$ref":"#/components/schemas/PickupConfig","description":"Configuration for the pickup strategy"},"dropoff":{"$ref":"#/components/schemas/DropoffConfig","description":"Configuration for the dropoff strategy"}},"type":"object","required":["battery_swap","pickup","dropoff"],"title":"RebalanceConfig","description":"Configuration for rebalancing strategies.\n\nThis schema includes configurations for battery swap, pickup, and dropoff\nstrategies."},"RebalancingFilters":{"properties":{"time_granularity_minutes":{"type":"integer","title":"Time Granularity Minutes","description":"Time granularity in minutes for the forecast"},"prediction_horizon_size":{"type":"integer","title":"Prediction Horizon Size","description":"Size of the prediction horizon in time steps (each one long `time_granularity_minutes` minutes)"},"grid":{"$ref":"#/components/schemas/GridFilters","description":"Grid schema defining the spatial structure for the forecast"},"operation_types":{"anyOf":[{"items":{"type":"string","enum":["pickup","dropoff","battery_swap"]},"type":"array"},{"type":"null"}],"title":"Operation Types","description":"list of operation types to filter the requested rebalance"},"override_strat":{"anyOf":[{"$ref":"#/components/schemas/RebalanceConfig"},{"type":"null"}],"description":"Override default strategy configuration for the rebalance","examples":[null]}},"type":"object","required":["time_granularity_minutes","prediction_horizon_size","grid"],"title":"RebalancingFilters","description":"Defines the filters applicable to a rebalancing request.\n\nThis schema includes parameters to filter operation types and override\ndefault strategy configurations."},"RebalancingResponse":{"properties":{"suggestions":{"items":{"$ref":"#/components/schemas/Operation"},"type":"array","title":"Suggestions","description":"list of rebalancing suggestions"}},"type":"object","required":["suggestions"],"title":"RebalancingResponse","description":"Represents the response structure for a rebalancing request.\n\nThis schema includes a list of suggested operations for rebalancing."},"RoutingPayload":{"properties":{"operation_pool":{"items":{"$ref":"#/components/schemas/Operation"},"type":"array","title":"Operation Pool","description":"List of operations to be considered in the routing solution"},"start_point":{"$ref":"#/components/schemas/Point","description":"Starting point for the routing solution"},"end_point":{"$ref":"#/components/schemas/Point","description":"Ending point for the routing solution"},"max_duration":{"type":"number","title":"Max Duration","description":"Maximum duration in seconds for the routing solution, default is 3600 seconds (1 hour)","default":3600},"max_capacities":{"additionalProperties":{"type":"integer"},"propertyNames":{"enum":["vehicles","charged_battery","empty_battery","space"]},"type":"object","title":"Max Capacities","description":"Maximum capacities for the routing solution","default":{"vehicles":1,"charged_battery":10,"empty_battery":10}},"start_capacities":{"additionalProperties":{"type":"integer"},"propertyNames":{"enum":["vehicles","charged_battery","empty_battery","space"]},"type":"object","title":"Start Capacities","description":"Starting capacities for the routing solution","default":{"vehicles":0,"charged_battery":10,"empty_battery":0}},"start_time":{"type":"string","format":"date-time","title":"Start Time","description":"Starting time for the routing solution, default is the current time"}},"type":"object","required":["operation_pool","start_point","end_point"],"title":"RoutingPayload"},"RoutingResponse":{"properties":{"plan":{"items":{"$ref":"#/components/schemas/RoutingStep"},"type":"array","title":"Plan","description":"list of redistribution steps"}},"type":"object","required":["plan"],"title":"RoutingResponse","description":"Represents the response structure for a redistribution request.\n\nThis schema includes a list of steps in the redistribution plan."},"RoutingStep":{"properties":{"operation":{"$ref":"#/components/schemas/Operation","description":"Operation to be performed in this step"},"step":{"type":"integer","title":"Step","description":"Step number in the redistribution plan"},"expected_arrival":{"type":"string","format":"date-time","title":"Expected Arrival","description":"Expected arrival time at the operation location"}},"type":"object","required":["operation","step","expected_arrival"],"title":"RoutingStep","description":"Represents a single step in a redistribution plan.\n\nThis schema includes details about the vehicle, its target zone, and\nthe operation to be performed."},"StrategyConfig":{"properties":{"threshold":{"type":"integer","title":"Threshold","description":"Threshold value for the strategy, e.g., battery level"},"urgency_levels":{"$ref":"#/components/schemas/UrgencyLevel","description":"Urgency levels for the strategy, e.g., low, medium, high"},"reason":{"type":"string","title":"Reason","description":"Reason for the strategy, e.g., battery level is low"}},"type":"object","required":["threshold","urgency_levels","reason"],"title":"StrategyConfig","description":"Defines the configuration for a strategy.\n\nThis schema includes a threshold value and urgency levels to determine\nthe strategy's behavior based on specific conditions."},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token","description":"JWT access token string."},"token_type":{"type":"string","title":"Token Type","description":"Type of the token, typically 'bearer'."}},"type":"object","required":["access_token","token_type"],"title":"TokenResponse","description":"Response schema for authentication tokens.\n\nContains the access token and its type, returned after successful authentication."},"UrgencyLevel":{"properties":{"low":{"type":"number","title":"Low","description":"Low urgency level, e.g., 50% battery level"},"medium":{"type":"number","title":"Medium","description":"Medium urgency level, e.g., 30% battery level"},"high":{"type":"number","title":"High","description":"High urgency level, e.g., 20% battery level"}},"type":"object","required":["low","medium","high"],"title":"UrgencyLevel","description":"Represents urgency levels for a strategy.\n\nThis schema defines low, medium, and high urgency levels, typically used to\ncategorize the severity of a situation, such as battery levels."},"UserPublic":{"properties":{"id":{"type":"integer","title":"Id","description":"Unique identifier of the user."},"full_name":{"type":"string","title":"Full Name","description":"Full name of the user."},"email":{"type":"string","title":"Email","description":"Email address of the user."},"company_slug":{"type":"string","title":"Company Slug","description":"Slug of the company the user belongs to."},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Datetime when the user was created."},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"Datetime when the user was last updated, if available."},"company":{"$ref":"#/components/schemas/CompanyPublic","description":"Public information about the user's company."},"case_studies":{"items":{"$ref":"#/components/schemas/CaseStudyPublic"},"type":"array","title":"Case Studies","description":"List of public case studies associated with the user."},"auth_scopes":{"items":{"$ref":"#/components/schemas/AuthScopePublic"},"type":"array","title":"Auth Scopes","description":"List of authorization scopes assigned to the user."}},"type":"object","required":["id","full_name","email","company_slug","created_at","company","case_studies","auth_scopes"],"title":"UserPublic","description":"Public schema for a user resource.\n\nExposes user information, company, case studies, and authorization scopes to API\nconsumers."}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}
